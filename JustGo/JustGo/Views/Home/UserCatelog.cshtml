@*@model IEnumerable<JustGo.ViewModels.ScheduleVM>*@
@{
    ViewData["Title"] = "View";
    //Layout = null;
}

@section Style{
    <link rel="stylesheet" href="~/css/UCg.css" asp-append-version="true" />
}
    <style>
        header {
            display: none;
        }

        .travel {
            font-weight: bold;
            margin:30px;
            color: BLACK;
            font-size: 28px;
            border-bottom: 5px solid transparent;
            border-image: linear-gradient(to right, #808080, transparent) 1;
        }

        .schedules {
            font-weight: bold;
            font-size: 18px;
        }
        .schedule:hover {
            transition: all 1s ease;
            transform: scale(1.1);
            box-shadow: 0 0 10px;
            opacity: 0.8;
            border-radius: 15px;
            cursor: grab;
            border: 4px solid #FFFAF0;
            outline: 10px ridge#87CEFA;
            border-radius: 1rem;
        }

        .schedule {
            margin:30px;
            /* margin: auto; */
            border: 5px solid #d3d3d3;
            height: 200px;
            border-radius: 10px;
            box-shadow: 0 0 3px;
            opacity: 0.9;
            background-color: #FFFFDF		;
            width: 270px;
            min-width: 245px;
        }
        /* 底下部分框 */

        .blog {
            margin:230px 30px 30px 30px;
            border: 4px solid#d3d3d3;
            height: 200px;
            border-radius: 20px;
            box-shadow: 0 0 3px;
            opacity: 0.7;
            background-color: #FFFFDF	;
            width: 270px;
            min-width: 245px;
        }
            /* 底下部分部落格框放大 */
            .blog:hover {
                transition: all 1s ease;
                transform: scale(1.1);
                box-shadow: 0 0 5px;
                opacity: 0.7;
                border-radius: 15px;
                cursor: grab;
                border: 4px solid #FFFAF0;
                outline: 10px ridge#87CEFA;
                border-radius: 1rem;
            }
        /* 3行字跟編輯的上下間距 */
        .schedule_word_margin {
            margin-top: 5%;
        }



        /* 編輯字體樣式 */

        .item_scheduleId {
            font-size: 25px;
            margin-left:10%;
        }
            /* 滑鼠移動字體變色 */

            .item_scheduleId:hover {
                transition: all 1.1s ease;
                cursor: grabbing;
                color: rgb(17, 17, 242);
            }
        /* 刪除字體樣式 */
        .DeleteSchedule_Style {
            font-size: 25px;
            margin-right:10%;
        }
            /* 刪除滑鼠移動變色*/

            .DeleteSchedule_Style:hover {
                cursor: grabbing;
                color: red;
            }
        /* 框內5行字的上間距*/
        .scheduleInfo_Margin {
            margin-top: 6%;
        }
        /* 框內第1行字的樣式*/
        .item_title {
            font-weight: bold;
            font-size: 19px;
            margin-left: 11%;
            margin-right: 5%;
            min-width: auto;
        }
        /* 框內第2.3行字的樣式*/
        .item_startDate {
            margin-top: 13px;
            margin-bottom: 13px;
            font-size: 17px;
            margin-left: 11%;
            margin-right: 5%;
            min-width: auto;
        }
        /* 框內5行字移動放大*/
        .item_title:hover {
            cursor: grabbing;
        }
        /* 分享行程樣式間距*/
        .CreateBlog_Style {
            font-size: 25px;
            margin-left: 10%;
      
        }
            /* 分享行程滑鼠移動放大*/
            .CreateBlog_Style:hover {
                cursor: grabbing;
                color: rgb(17, 17, 242);
            }
        /* 背景顏色*/
        .Background-color_Style {
            background-image: linear-gradient(to top left, #FFF8D7	,#FFFF,#FFF8D7	);
        }

        /* 框格內第1條線間距*/
        .hr_Style {
            margin-top: 10px;
            margin-bottom: 10px;
            margin-left: 11%;
            margin-right: 11%;
            min-width: auto;
            color: black;
            font-size: 18px;
            min-width: auto;
        }
        /* 框格內第2條線間距*/
        .hr2_Style {
            margin-top: 10px;
            margin-bottom: 10px;
            margin-left: 11%;
            margin-right: 11%;
            min-width: auto;
            color: black;
            font-size: 18px;
            min-width: auto;
        }

    
       .col{
            font-size:30PX;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
                font-weight: bold;
       }
       .col:hover{     
           color:#FFFF;
             background-color:#97CBFF	;
             border-radius:10px;
             border:3px solid #ffff;
             border-color:aliceblue;
                          transition: all 0.8s ease;
                             cursor: grab;
                      transform: scale(0.75);
                       font-weight: bold;
                        opacity: 0.7;
       }

        .schedule_word_margin{
            display:flex;
            justify-content:space-between ;
        }
        
       @@media screen and (max-width:600px){
            .col{
            font-size:15px;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
                font-weight: bold;
       }
       }
         @@media screen and (max-width:430px){
            .col{
            font-size:8px;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
                font-weight: bold;
       }
       }
    </style>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.0/css/bootstrap.min.css" />
    <div class="Background-color_Style">
                  <div class="container"style="padding-top:40px; padding-bottom:40px;">
                      <div class="row">
               <div class="col">行程行程</div>
               <div class="col">行程</div>
                 <div class="col">行程</div>
                 <div class="col">行程</div>
                 <div class="col">行程</div>
            </div>
            </div>
        <div class="container" id="app">
        <div class="row">
              <div class="travel">行程</div>
            <div class="block">
                <div class="schedules row row-cols-2 row-cols-md-3 row-cols-xl-5 ">
                    @*<div class="schedule" v-for="(item,index) in schedule" :key="index">*@
                    <div class="schedule" v-for="(item,index) in schedule" v-if="nextSchedule(index)">
                        <div class="scheduleInfo scheduleInfo_Margin">
                            <span class="item_title">{{item.title}}</span><br/>
                            <hr class="hr_Style" />
                            <span class="item_startDate">{{item.startDate}}</span><br />
                            <span class="item_startDate">{{item.endDate}}</span><br />
                        </div>
                        <hr class="hr_Style" />
                        <div class="buttonBar schedule_word_margin">
                            <span class="item_scheduleId" @@click="editSchedule(item.scheduleId)"><i class="fa-solid fa-file-pen"></i></span>
                            <span class=" DeleteSchedule_Style" @@click="deleteSchedule(item.scheduleId,index)"><i class="fa-solid fa-trash-can"></i></span>
                        </div>
                    </div>
                </div>
            </div>     
            <div class="travel">過往行程</div>
            <div class="block">
                <div class="schedules row row-cols-2 row-cols-md-3 row-cols-xl-5 ">
                    <div class="schedule" v-for="(item,index) in schedule" v-if="exSchedule(index)">
                        <div class="scheduleInfo scheduleInfo_Margin">
                            <span class="item_title">{{item.title}}</span><br>
                            <hr class="hr_Style" />
                            <span class="item_startDate">{{item.startDate}}</span><br>
                            <span class="item_startDate">{{item.endDate}}</span><br>
                        </div>
                        <hr class="hr_Style" />
                        <div class="buttonBar schedule_word_margin">
                            <span class="CreateBlog_Style" @@click="createBlog(item.scheduleId)"><i class="fa-solid fa-share-from-square"></i></span>
                            <span class="DeleteSchedule_Style" @@click="deleteSchedule(item.scheduleId,index)"><i class="fa-solid fa-trash-can"></i></span>
                        </div>
                    </div>
                </div>
            </div>                
            <div class="travel">遊記</div>
            <div class="block">
                <div class="schedules row row-cols-2 row-cols-md-3 row-cols-xl-5 ">
                    <div class="blog" v-for="item in 4">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    @section Scripts{
        <script src="https://kit.fontawesome.com/2f8972a878.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.js"></script>
<script>
    new Vue({
        el: "#app",
        data() {
            return {
                showSchedule: [],
                dateNow: "",
            }
        },
        computed: {
            schedule() {
                return this.showSchedule;
            }
        },
        methods: {
            nextSchedule(index) {
                this.dateNow = new Date();
                let datetime = new Date(this.showSchedule[index].endDate)

                if (this.dateNow < new Date(this.showSchedule[index].endDate)) {
                    return true
                } else {
                    return false
                }
            },
            exSchedule(index) {
                this.dateNow = new Date();
                let datetime = new Date(this.showSchedule[index].endDate)

                if (this.dateNow < new Date(this.showSchedule[index].endDate)) {
                    return false
                } else {
                    return true
                }
            },
            editSchedule(scheduleId) {
                window.location.href = '@Url.Action("itinerary","Home")?' + scheduleId
                //window.location.href = `@Url.Action("itinerary","Home",new {schedule = "123"})"
            },
            deleteSchedule(scheduleId, index) {
                this.showSchedule.splice(index, 1);
                axios.post("@Url.Action("deleteSchedule","Schedule")", { ScheduleId: scheduleId })
                    .catch(err => console.log("err"))
            },
            createBlog(scheduleId) {
                window.location.href = '@Url.Action("EditBlog","Home")?' + scheduleId
            }
        },
        mounted() {
            axios.post("@Url.Action("selectUserSchedule","Schedule")")
                .then(res => this.showSchedule = res.data)
                .catch(err => console.log("err"))
        },

    })
</script>
}

